<!DOCTYPE html>
<html lang="es">
<head>
<<<<<<< HEAD
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Cuenta - Programa Estudiante-Tutor</title>

    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
          rel="stylesheet" 
          xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
          crossorigin="anonymous">
    
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../src/styles/styles.css">
    <link rel="stylesheet" href="../src/styles/crearCuenta.css"> 

</head>
<body class="d-flex flex-column min-vh-100">
    
     <header class="navbar navbar-dark bg-ucab-blue py-3">
        <div class="container-fluid mx-lg-5">
            <a class="navbar-brand fw-bold fs-5 me-5" href="#">
                    UCAB <span class="fw-normal">Programa Estudiante-Tutor</span>
                </a>
        </div>
    </header>

    
    <div class="login-container">
        <div class="login-card"> 
            <h2 class="text-center fw-bold fs-4 mb-2">Crear Cuenta</h2>
            <p class="text-center text-muted mb-4 fs-6">Completa el formulario para registrarte en el sistema</p>

            <form id="signupForm">
                
                <div class="row mb-3">
                    <div class="col-md-6 mb-3 mb-md-0">
                        <label for="nombreInput" class="form-label text-muted fs-6">Nombre</label>
                        <input type="text" class="form-control" id="nombreInput" placeholder="Juan" required>
                    </div>
                    <div class="col-md-6">
                        <label for="apellidoInput" class="form-label text-muted fs-6">Apellido</label>
                        <input type="text" class="form-control" id="apellidoInput" placeholder="Pérez" required>
                    </div>
                </div>

                
                <div class="mb-3">
                    <label for="emailInput" class="form-label text-muted fs-6">Correo Electrónico Institucional</label>
                    <input type="email" class="form-control" id="emailInput" placeholder="ejemplo@ucab.edu.ve" required>
                </div>

                
                <div class="mb-3">
                    <label class="form-label text-muted fs-6">Rol</label>
                    <div class="btn-group w-100 role-selection" role="group">
                        
                        <button type="button" class="btn btn-outline-secondary" id="roleEstudiante">Estudiante</button>
                        <button type="button" class="btn btn-outline-secondary" id="roleTutor">Tutor</button>
                    </div>
                </div>

                
                <div class="mb-3 position-relative">
                    <label for="passwordInput" class="form-label text-muted fs-6">Contraseña</label>
                    <input type="password" class="form-control" id="passwordInput" placeholder="******" required>
                </div>
                
                
                <div class="mb-4 position-relative">
                    <label for="confirmPasswordInput" class="form-label text-muted fs-6">Confirmar Contraseña</label>
                    <input type="password" class="form-control" id="confirmPasswordInput" placeholder="******" required>
                </div>

                

                
                <button type="submit" class="btn btn-ucab-primary w-100 mb-4">Registrarse</button>
            </form>

            
            <p class="text-center text-muted text-register m-0">
                ¿Ya tienes una cuenta? <a href="logIn.html" class="text-decoration-none" style="color: var(--ucab-link); font-weight: 500;">Inicia sesión aquí</a>
            </p>
        </div>
    </div>

    
    <footer class="footer-login mt-auto bg-ucab-blue">
        <span>© 2025 UCAB - Universidad Católica Andrés Bello</span>
    </footer>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
            xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" 
            crossorigin="anonymous">
    </script>
    
    <script src="../src/components/auth/crearCuenta.js"></script>
=======
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Crear Cuenta</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background:#f6f8fb; }
    .card-center { max-width:720px; margin:2rem auto; }
    #messages { position: fixed; top:1rem; right:1rem; z-index:1080; width:320px; }
  </style>
</head>
<body>
  <div class="container card-center">
    <div class="card p-4 shadow-sm">
      <h3 class="mb-3">Crear Cuenta</h3>

      <form id="createAccountForm" novalidate>
        <div class="row g-2">
          <div class="col-md-6 mb-3">
            <label class="form-label">Nombre</label>
            <input id="nombre" name="nombre" class="form-control" required />
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label">Apellido</label>
            <input id="apellido" name="apellido" class="form-control" required />
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label">Correo institucional</label>
          <input id="email" name="email" type="email" class="form-control" placeholder="usuario@est.ucab.edu.ve" required />
          <div class="form-text">El correo debe terminar en <code>@est.ucab.edu.ve</code></div>
        </div>

        <div class="row g-2 mb-3">
          <div class="col-md-6">
            <label class="form-label">Contraseña</label>
            <input id="password" name="password" type="password" class="form-control" minlength="6" required />
          </div>
          <div class="col-md-6">
            <label class="form-label">Rol</label>
            <select id="rol" name="rol" class="form-select" required>
              <option value="">Seleccionar rol</option>
              <option value="tutor">Tutor</option>
              <option value="estudiante">Estudiante</option>
              <option value="admin">Admin</option>
            </select>
          </div>
        </div>

        <div id="formError" class="text-danger mb-2 d-none"></div>

        <div class="d-flex gap-2">
          <button id="submitBtn" type="submit" class="btn btn-primary">Crear cuenta</button>
          <button id="resetBtn" type="button" class="btn btn-outline-secondary">Limpiar</button>
          <div class="ms-auto align-self-center" id="statusText"></div>
        </div>
      </form>

      <hr />

      <div class="mt-2">
        <a href="/login">¿Ya tienes cuenta? Iniciar sesión</a>
      </div>
    </div>
  </div>

  <div id="messages" aria-live="polite" aria-atomic="true"></div>

  <script>
    (function () {
      const form = document.getElementById('createAccountForm');
      const nombre = document.getElementById('nombre');
      const apellido = document.getElementById('apellido');
      const email = document.getElementById('email');
      const password = document.getElementById('password');
      const rol = document.getElementById('rol');
      const submitBtn = document.getElementById('submitBtn');
      const resetBtn = document.getElementById('resetBtn');
      const formError = document.getElementById('formError');
      const statusText = document.getElementById('statusText');
      const messages = document.getElementById('messages');

      function pushToast(message, type = 'info') {
        const wrapper = document.createElement('div');
        wrapper.innerHTML = '<div class="toast align-items-center text-bg-' + (type === 'error' ? 'danger' : (type === 'success' ? 'success' : 'info')) + ' border-0 show" role="alert" aria-live="assertive" aria-atomic="true">' +
          '<div class="d-flex"><div class="toast-body">' + message + '</div>' +
          '<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div></div>';
        messages.appendChild(wrapper);
        setTimeout(() => { try { wrapper.remove(); } catch(e){} }, 5000);
      }

      function showError(text) {
        formError.textContent = text;
        formError.classList.remove('d-none');
        pushToast(text, 'error');
        setTimeout(() => formError.classList.add('d-none'), 4000);
      }

      function setSaving(active, text = '') {
        if (active) {
          submitBtn.setAttribute('disabled', 'disabled');
          statusText.textContent = text;
        } else {
          submitBtn.removeAttribute('disabled');
          statusText.textContent = '';
        }
      }

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const n = nombre.value.trim();
        const a = apellido.value.trim();
        const em = email.value.trim();
        const pw = password.value;
        const r = rol.value;

        if (!n || !a || !em || !pw || !r) return showError('Todos los campos son obligatorios');
        if (!em.endsWith('@est.ucab.edu.ve')) return showError('El correo debe terminar en @est.ucab.edu.ve');
        if (pw.length < 6) return showError('La contraseña debe tener al menos 6 caracteres');

        const payload = { nombre: n, apellido: a, email: em, password: pw, rol: r };

        try {
          setSaving(true, 'Creando cuenta...');
          const res = await fetch('/auth/registro', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          const json = await res.json().catch(() => null);
          setSaving(false);

          if (res.status === 201) {
            pushToast('Cuenta creada correctamente', 'success');
            form.reset();
            return;
          }

          const msg = (json && (json.error || json.mensaje)) || `Error ${res.status}`;
          showError(msg);
        } catch (err) {
          console.error('Error creando cuenta', err);
          setSaving(false);
          showError('Error de red al crear cuenta');
        }
      });

      resetBtn.addEventListener('click', () => form.reset());
    })();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
>>>>>>> origin/leonardo
</body>
</html>
